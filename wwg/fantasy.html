<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		
		<title>WWG Fantasy</title>

		<link rel="stylesheet" type="text/css" href="../cdn.datatables.net/r/bs-3.3.5/jq-2.1.4%2cdt-1.10.8/datatables.min.css"/>
 
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        
		<script type="text/javascript" src="../cdn.datatables.net/r/bs-3.3.5/jqc-1.11.3%2cdt-1.10.8/datatables.min.js"></script>
		
		
		<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
		
		<script type="text/javascript" charset="utf-8">
		 //utility function
		 function csvJSON(csv){

		  var lines=csv.split("\n");

		  var result = [];

		  var headers=lines[0].split(",");

		  for(var i=1;i<lines.length;i++){

			  var obj = {};
			  var currentline=lines[i].split(',"')[0].split(",");

			  for(var j=0;j<headers.length-1;j++){
				  obj[headers[j]] = currentline[j];
			  }
			  // add the array 
			  obj[headers[headers.length-1]] = lines[i].split(',"')[1].split(",");

			  result.push(obj);

		  }
		  
		  //return result; //JavaScript object
		  return result; //JSON
		}
		
		function checkAndParseArray(line){
		}
		 
		 //end utility 
		   $.ajax({
			  url: "https://docs.google.com/spreadsheets/d/e/2PACX-1vSA7MapmaniHJhQnuXhejZo5j42X5k_cqOsIc5AXW0jOgO1MQADUxuiDnJvfqzA1M_y3JgZP1_Ai1J4/pub?output=csv",
			 
			type: 'GET',
			crossDomain: true,
			dataType: 'text',
			success: function(d) { console.log(d); buildTables(d); },
			error: function(e) { console.log('Error', e); },
			//beforeSend: setHeader
			});
			
			function buildTables(data){
			  var json = csvJSON(data);
			  var outhtml = "";
			  console.log(json);
			  
			  for(var t in json){
			     var row = "<tr class='score_row'>"
				 +"<td>1</td>"
				 +"<td>"+json.name+"</td><td>"+json.user+"</td><td>0</td><td>0</td><td>0</td><td></td>"
				 +"</tr>"
				 outhtml = outhtml + row; 
			  }
			  $("#score_table").html(outhtml);
			}
		</script>
		<style>
		  .footer {
				bottom: 0;
				width: 100%;
				height: 60px;
				background-color: #f5f5f5;
			}
		</style>
		
	</head>
	<body>
		<div class="container">
		<div class="row"><h1><span class="pull-left">WWG Fantasy</span></h1>
		</div>
		<div class="row">
		<div class="">
		
		<br>
		<!-- Total Result Pane -->
		<div class="panel panel-primary">
        <div id="" class="panel-heading">Team Scoreboard<span class="player_name"></span></div>
		<table id="player_stats" class="table table-bordered"><thead>
		<tr>
		<th>Rank </th>
		<th>Team Name</th>
		<th>Owner</th>
		<th>Posts</th>
		<th>Rounds Survived</th> 
		<th>Kills</th> 
		</tr>
		</thead>
		<tbody id="score_table">
		
		</tbody>
		</table>
		</div> <!-- /Total Result Pane -->
		<!-- Advanced stats -->
		<div id="">
		<!-- Human Result Pane -->
		<div class="panel panel-default">
        <div id="" class="panel-heading"><img src="http://www.braingle.com/games/werewolf/images/user.png" width="16" height="16" alt="h">  Player Stats <span class="player_name"></span></div>
		<table id="human_stats" class="table table-bordered"><thead>
		<tr>
		<th>Human Games Played</th>
		<th>Human Win %</th>
		<th>Wins</th>
		<th>Losses</th> 
		<th>Avg. Round Shot</th>
		<th>Avg. Round Eaten</th>
		</tr>
		</thead>
		<tbody>
		<tr id="human_stats_row" class="ww_stat">
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		</tr>
		</tbody>
		</table>
		</div> <!-- /Human Result Pane -->
		
		<!-- WOLF Result Pane -->
		<div class="panel panel-default">
        <div id="" class="panel-heading"><img src="http://www.braingle.com/games/werewolf/images/wolf.gif" width="16" height="16" alt="w"> Wolf Stats: <span class="player_name"></span></div>
		<table id="wolf_stats" class="table table-bordered"><thead>
		<tr>
		<th>Wolf Games Played</th>
		<th>Wolf Win %</th>
		<th>Wins</th>
		<th>Losses</th> 
		<th>Avg. Round Shot</th>
		</tr>
		</thead>
		<tbody>
		<tr id="wolf_stats_row" class="ww_stat">
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		</tr>
		</tbody>
		</table>
		</div> <!-- /WOLF Result Pane -->
		
		<!-- SEER Result Pane -->
		<div class="panel panel-default">
        <div id="" class="panel-heading"><img src="http://www.braingle.com/games/werewolf/images/wand.png" width="16" height="16" alt="s"> Seer Stats: <span class="player_name"></span></div>
		<table id="seer_stats" class="table table-bordered"><thead>
		<tr>
		<th>Seer Games Played</th>
		<th>Seer Win %</th>
		<th>Wins</th>
		<th>Losses</th> 
		<th>Avg. Round Caught</th>
		</tr>
		</thead>
		<tbody>
		<tr id="seer_stats_row" class="ww_stat">
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		<td></td>
		</tr>
		</tbody>
		</table>
		</div> <!-- /WOLF Result Pane -->
		</div> <!-- /advanced stats  -->
		</div>
		
		</div>
		<div class="row">
		<h3>Game Statistics</h3>
		<table id="example" class="display" cellspacing="0" width="100%">
		<thead>
		<tr><th>Game No.</th><th>Player</th><th>Role</th><th>Fate</th><th>Round</th><th>Outcome</th><th>Total Game Rounds</th></tr></thead>
		</tbody>
		<tfoot><tr><th>Game No.</th><th>Player</th><th>Role</th><th>Fate</th><th>Round</th><th>Outcome</th><th>Total Game Rounds</th></tr></tfoot>
		</table>
		</div>
		
		</div>

	</body>

</html>